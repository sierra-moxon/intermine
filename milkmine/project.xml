<project type="bio">
  <property name="target.model" value="genomic"/>
  <property name="common.os.prefix" value="common"/>
  <property name="intermine.properties.file" value="milkmine.properties"/>
  <property name="default.intermine.properties.file" location="../default.intermine.integrate.properties"/>
    
  <sources>
    <!-- Each ensembl organism needs to be specified as a separate source, each
         also need some properties to locate the mysql database e.g. db.ensembl-mouse.
         We will add an additional mode to the ensembl source to retrieve just genes
         and locations, etc.  -->
<!--    <source name="ensembl-mouse" type="ensembl">
      <property name="organism" value="MM"/>
      <property name="excludelist" value="org.intermine.model.ensembl.dna org.intermine.model.ensembl.repeat_feature org.intermine.model.ensembl.misc_attrib org.intermine.model.ensembl.misc_feature org.intermine.model.ensembl.misc_feature_misc_set"/>
    </source> -->
<!--    <source name="ensembl-rat" type="ensembl">
      <property name="organism" value="RN"/>
      <property name="excludelist" value="org.intermine.model.ensembl.dna org.intermine.model.ensembl.repeat_feature org.intermine.model.ensembl.misc_attrib org.intermine.model.ensembl.misc_feature org.intermine.model.ensembl.misc_feature_misc_set"/>
    </source> -->
<!--    <source name="ensembl-chimp" type="ensembl">
      <property name="organism" value="PT"/>
      <property name="excludelist" value="org.intermine.model.ensembl.dna org.intermine.model.ensembl.repeat_feature org.intermine.model.ensembl.misc_attrib org.intermine.model.ensembl.misc_feature org.intermine.model.ensembl.misc_feature_misc_set"/>
    </source> -->
<!--    <source name="ensembl-dog" type="ensembl">
      <property name="organism" value="ML"/>
      <property name="excludelist" value="org.intermine.model.ensembl.dna org.intermine.model.ensembl.repeat_feature org.intermine.model.ensembl.misc_attrib org.intermine.model.ensembl.misc_feature org.intermine.model.ensembl.misc_feature_misc_set"/>
    </source> -->
<!--    <source name="ensembl-cow" type="ensembl">
      <property name="organism" value="BT"/>
      <property name="excludelist" value="org.intermine.model.ensembl.dna org.intermine.model.ensembl.repeat_feature org.intermine.model.ensembl.misc_attrib org.intermine.model.ensembl.misc_feature org.intermine.model.ensembl.misc_feature_misc_set"/>
    </source> -->
<!--    <source name="ensembl-opossum" type="ensembl">
      <property name="organism" value="MD"/>
      <property name="excludelist" value="org.intermine.model.ensembl.dna org.intermine.model.ensembl.repeat_feature org.intermine.model.ensembl.misc_attrib org.intermine.model.ensembl.misc_feature org.intermine.model.ensembl.misc_feature_misc_set"/>
    </source> -->

   <source name="milk_prots" type="milk_prots">
      <property name="tgt.xml.file" location="/user_data/XML/Milk_Prots/milk_prots.xml"/>
   </source> 

    <!-- UniProt may need to be split into to two steps because of integration keys,
        this is just because some organisms may fill in Gene.identifier and some
        fill in Gene.organismDbId.  There is no need for one source per organism.-->
   <source name="uniprot" type="uniprot">
      <property name="uniprot.organisms" value="10090 10116"/>
      <property name="src.data.dir" location="/user_data/XML/"/>
    </source> 
    <!-- <source name="uniprot-gene-identifier" type="uniprot">
      <property name="uniprot.organisms" value="10090,10116"/>
      <property name="src.data.dir" location="/user_data/XML/"/>
    </source> -->

    <!-- load all PSI files downloaded to given directory.  Need to include a list
         taxon ids to restrict the interactions loaded.  -->
    <source name="psi-intact" type="psi">
      <property name="src.data.dir" location="/user_data/XML/psi"/>
      <property name="organisms" value="10090 10116"/>
    </source> 

    <!-- need to get a postgresql dump of interpro from FlyMine group to mirror
         locally.  Then just specify list of taxon ids to retrieve for. -->
    <!-- <source name="interpro" type="interpro">
      <property name="interpro.organisms" value="10090 10116"/>
    </source> -->

    <!-- load the gene ontology term definitions. -->
    <source name="go" type="go">
      <property name="src.data.file" location="/user_data/XML/ontology/gene_ontology.obo"/>
    </source> 

    <!-- Load all InParanoid orthologue files in specified directory.  This sets
        Gene.identifier so best to use alternatives to ensembl ids where possible,
        this will be fixed to become a bit more flexible.  -->
    <source name="inparanoid-orthologue" type="orthologue">
      <property name="src.data.dir" location="/user_data/XML/inparanoid/"/>
    </source>

    <!-- load all gene_association files from specified directory.  Again this is split
         into two depending on whether Gene.identifier or Gene.organismDbId is set. -->
<!--    <source name="go-annotation-mouse-gene-identifier" type="go-annotation">
      <property name="ontologyfile" location="/user_data/XML/ontology/gene_ontology.obo"/>
      <property name="geneattribute" value="identifier"/>
      <property name="src.data.dir" location="/user_data/XML/go/"/>
    </source> -->
    <source name="go-annotation-gene-identifier" type="go-annotation">
      <property name="ontologyfile" location="/user_data/XML/ontology/gene_ontology.obo"/>
      <property name="geneattribute" value="identifier"/>
      <property name="src.data.dir" location="/user_data/XML/go/"/>
    </source>
    <source name="entrez-organism" type="entrez-organism">
      <!-- this source finds the taxon ids in the objectstore, retrieves
           species name and genus from Entrez into an InterMine format XML
           file, loads that file into a target items DB, then into the final
           objectstore -->
      <property name="tgt.xml.file" location="build/organisms.xml"/>
    </source> 

    <!-- old stuff, moved by rns -->
    <!-- source name="uniprot-mouse" type="uniprot">
      <property name="uniprot.organisms" value="10090"/>
      <property name="src.data.dir" location="/user_data/XML/"/>
    </source>
    <source name="uniprot-rat" type="uniprot">
      <property name="uniprot.organisms" value="10116"/>
      <property name="src.data.dir" location="/user_data/XML/"/>
    </source> -->
  </sources>

  <post-processing>
    <post-process name="fetch-ensembl-contig-sequences"/>
    <post-process name="calculate-locations"/>
    <post-process name="create-references"/>

    <!-- post-process name="update-orthologues"/ -->

    <post-process name="make-spanning-locations"/>
    <post-process name="create-chromosome-locations-and-lengths"/>
    <post-process name="create-symmetrical-relation-references"/>
    <post-process name="create-indexes-production-attribute"/>
    <post-process name="update-publications"/>
    <post-process name="transfer-sequences-chromosome"/>
    <post-process name="transfer-sequences-located-sequence-feature"/>
    <post-process name="transfer-sequences-transcripts"/>

    <post-process name="do-sources"/>

    <post-process name="set-collection-counts"/>

  </post-processing>

</project>

